<!doctype html><html lang=es-es dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Re-Coloring # The possibility of changing the colors of a figure is one of the most interesting features of computer graphics, since it allows image transformations to be carried out in a simple and fast way. In this case, the p5.js library has been used to transform the colors of an image based on the change in the palette you are using.
Through the use of different color palettes, effects can be obtained in the image that can be implemented to help people with color blindness."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Re-Coloring # The possibility of changing the colors of a figure is one of the most interesting features of computer graphics, since it allows image transformations to be carried out in a simple and fast way. In this case, the p5.js library has been used to transform the colors of an image based on the change in the palette you are using.
Through the use of different color palettes, effects can be obtained in the image that can be implemented to help people with color blindness."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcrackers.github.io/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ReColoring/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-16T17:02:15-05:00"><title>Re Coloring | Visual Crackers ðŸ’¥</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Crackers ðŸ’¥</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Visual Computing</span><ul><li><input type=checkbox id=section-4a86fae448a0f2e6d110fe23b7c4ce25 class=toggle checked>
<label for=section-4a86fae448a0f2e6d110fe23b7c4ce25 class="flex justify-between"><a role=button>Visual Ilusions</a></label><ul><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Intro-background/>Intro & Background</a></li><li><input type=checkbox id=section-0cee58da2e2f7ba7406b81f716a40f1b class=toggle checked>
<label for=section-0cee58da2e2f7ba7406b81f716a40f1b class="flex justify-between"><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/>Code & Results</a></label><ul><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/Palette/>Palette</a></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ColorTracker/>Color Tracker</a></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ReColoring/ class=active>Re Coloring</a></li></ul></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Conclusions-Future-work/>Conclusions & Future Work</a></li></ul></li></ul></li><li><a href=/showcase/docs/About/>About</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Re Coloring</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#re-coloring><strong>Re-Coloring</strong></a><ul><li><a href=#how-does-it-work>How does it work?</a></li><li><a href=#result>Result</a></li></ul></li><li><a href=#samples>Samples</a><ul><li><a href=#ishihara-test-7>Ishihara Test 7</a></li><li><a href=#ishihara-test-4>Ishihara Test 4</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=re-coloring><strong>Re-Coloring</strong>
<a class=anchor href=#re-coloring>#</a></h1><p>The possibility of changing the colors of a figure is one of the most interesting features of computer graphics, since it allows image transformations to be carried out in a simple and fast way. In this case, the <strong>p5.js</strong> library has been used to transform the colors of an image based on the change in the palette you are using.</p><p>Through the use of different color palettes, effects can be obtained in the image that can be implemented to help people with color blindness.For example, you can change the color palette of an image to make it easier for a visually impaired person to distinguish.</p><blockquote class="book-hint info"><p>There are certain color palettes that are more suitable for people with color blindness, such as the <a href=https://lospec.com/palette-list/ibm-color-blind-safe><strong>IBM</strong></a>, <a href=https://www.color-hex.com/color-palette/1018347><strong>Wong</strong></a>, or <a href=https://personal.sron.nl/~pault/><strong>Tol</strong></a>.</p><p>For more information about color palettes for people with color blindness, you can consult the following <a href=https://davidmathlogic.com/colorblind/>article</a> by <a href=https://davidmathlogic.com/>David Nichols</a>.</p></blockquote><h2 id=how-does-it-work>How does it work?
<a class=anchor href=#how-does-it-work>#</a></h2><p>The script is based on the extraction of the colors that appear in an image, and from the palette selected by the user, we proceed to change those of the original image. The fundamental point of the code is to find the distance between the colors in the palette and those in the image, and from there, the closest one is selected for replacement.</p><p>This code is shown below:</p><details open><summary>getPaletteColor</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getPaletteColor</span>(<span style=color:#a6e22e>imgColor</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>minDist</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>Infinity</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>currentPalette</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentPalette</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dist</span>(<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>pColor</span>), <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>pColor</span>), <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>pColor</span>));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>d</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>minDist</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>minDist</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>d</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentPalette</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><blockquote class="book-hint info">It is important to note that the palettes that are available do not represent a solution for all cases, since not all people with color blindness have the same problems and it depends largely on the colors that are in the original figure.</blockquote><h2 id=result>Result
<a class=anchor href=#result>#</a></h2><iframe id=palette class=sketch srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            <script src=/showcase/sketches/recoloring.js>
            </script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><blockquote class="book-hint danger">Although a color blind palette can be used, it is not guaranteed that the person will be able to distinguish the colors in the image.</blockquote><h1 id=samples>Samples
<a class=anchor href=#samples>#</a></h1><h2 id=ishihara-test-7>Ishihara Test 7
<a class=anchor href=#ishihara-test-7>#</a></h2><hr><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h2 id=unaltered-view>Unaltered View
<a class=anchor href=#unaltered-view>#</a></h2><p><img src=https://i.ibb.co/xhkcw5v/74-Original.png alt="Ishihara original" title="Ishihara original"></div><div class="flex-even markdown-inner"><h2 id=view-with-protanopia>View with Protanopia
<a class=anchor href=#view-with-protanopia>#</a></h2><p><img src=https://i.ibb.co/Cm162h0/74-Protanopia.png alt="Ishihara protanopia" title="Ishihara protanopia"></div></div><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h2 id=ibm-palette>IBM Palette
<a class=anchor href=#ibm-palette>#</a></h2><p><img src=https://i.ibb.co/6R9R4MG/74IBM.png alt="Ishihara paleta x" title="Ishihara con paleta IBM"></div><div class="flex-even markdown-inner"><h2 id=palette-2>Palette #2
<a class=anchor href=#palette-2>#</a></h2><p><img src=https://i.ibb.co/gJT7t5w/74-Paleta2.png alt="Ishihara paleta y" title="Ishihara con paleta #2"></div></div><h2 id=ishihara-test-4>Ishihara Test 4
<a class=anchor href=#ishihara-test-4>#</a></h2><hr><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h2 id=unaltered-view>Unaltered View
<a class=anchor href=#unaltered-view>#</a></h2><p><img src=https://i.ibb.co/3TKJ5fQ/5-Original.png alt="Ishihara original" title="Ishihara original"></div><div class="flex-even markdown-inner"><h2 id=view-with-protanopia>View with Protanopia
<a class=anchor href=#view-with-protanopia>#</a></h2><p><img src=https://i.ibb.co/SmKjtsH/5-Protanopia.png alt="Ishihara protanopia" title="Ishihara protanopia"></div></div><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h2 id=ibm-palette>IBM Palette
<a class=anchor href=#ibm-palette>#</a></h2><p><img src=https://i.ibb.co/7ttF5zP/5IBM.png alt="Ishihara paleta x" title="Ishihara con paleta IBM"></div><div class="flex-even markdown-inner"><h2 id=palette-3>Palette #3
<a class=anchor href=#palette-3>#</a></h2><p><img src=https://i.ibb.co/F5Sv2fj/5Paleta3.png alt="Ishihara paleta y" title="Ishihara con paleta #3"></div><div class="flex-even markdown-inner"><h2 id=palette-2>Palette #2
<a class=anchor href=#palette-2>#</a></h2><p><img src=https://i.ibb.co/64ThknP/5Paleta2.png alt="Ishihara paleta z" title="Ishihara con paleta #2"></p><p>Full code:</p><details><summary>ReColoring.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvasSize</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>700</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>images</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Landscape.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_01.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_02.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_03.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_05.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_06.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_08.jpg&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Ishihara_10.jpg&#39;</span>,
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>random</span>(<span style=color:#a6e22e>images</span>.<span style=color:#a6e22e>length</span>));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/assets/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>images</span>[<span style=color:#a6e22e>index</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>canvasSize</span>, <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span><span style=color:#f92672>*</span><span style=color:#a6e22e>canvasSize</span><span style=color:#f92672>/</span><span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ibm</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;#648FFF&#39;</span>, <span style=color:#e6db74>&#39;#785EF0&#39;</span>, <span style=color:#e6db74>&#39;#DC267F&#39;</span>, <span style=color:#e6db74>&#39;#FE6100&#39;</span>, <span style=color:#e6db74>&#39;#FFB000&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>wong</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;#000000&#39;</span>, <span style=color:#e6db74>&#39;#E69F00&#39;</span>, <span style=color:#e6db74>&#39;#56B4E9&#39;</span>, <span style=color:#e6db74>&#39;#009E73&#39;</span>, <span style=color:#e6db74>&#39;#F0E442&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;#0072B2&#39;</span>, <span style=color:#e6db74>&#39;#D55E00&#39;</span>, <span style=color:#e6db74>&#39;#CC79A7&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tol</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;#332288&#39;</span>, <span style=color:#e6db74>&#39;#117733&#39;</span>, <span style=color:#e6db74>&#39;#44AA99&#39;</span>, <span style=color:#e6db74>&#39;#88CCEE&#39;</span>, <span style=color:#e6db74>&#39;#DDCC77&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;#CC6677&#39;</span>, <span style=color:#e6db74>&#39;#AA4499&#39;</span>, <span style=color:#e6db74>&#39;#882255&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>palette1</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;#264653&#39;</span>, <span style=color:#e6db74>&#39;#2a9d8f&#39;</span>, <span style=color:#e6db74>&#39;#e9c46a&#39;</span>, <span style=color:#e6db74>&#39;#f4a261&#39;</span>, <span style=color:#e6db74>&#39;#e76f51&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>palette2</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>, <span style=color:#e6db74>&#34;#000000&#34;</span>, <span style=color:#e6db74>&#34;#FFC0CB&#34;</span>, <span style=color:#e6db74>&#34;#008000&#34;</span>, <span style=color:#e6db74>&#34;#FFD700&#34;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>palette3</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;#F5793A&#39;</span>, <span style=color:#e6db74>&#39;#A95AA1&#39;</span>, <span style=color:#e6db74>&#39;#85C0F9&#39;</span>, <span style=color:#e6db74>&#39;#0F2080&#39;</span>, <span style=color:#e6db74>&#39;#FDFC33&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ibm</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta IBM&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta Wong&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta Tol&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta 1&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta 2&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Paleta 3&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>changed</span>(<span style=color:#a6e22e>changePalette</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>changePalette</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>selected</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>paletteSel</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta 1&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>palette1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta 2&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>palette2</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta 3&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>palette3</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta IBM&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ibm</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta Wong&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>wong</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>selected</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Paleta Tol&#39;</span>) <span style=color:#a6e22e>currentPalette</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>tol</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>redraw</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imgColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>paletteColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getPaletteColor</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stroke</span>(<span style=color:#a6e22e>paletteColor</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>point</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y</span><span style=color:#f92672>+=</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y</span><span style=color:#f92672>&gt;=</span><span style=color:#a6e22e>height</span>) <span style=color:#a6e22e>noLoop</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getPaletteColor</span>(<span style=color:#a6e22e>imgColor</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>imgColor</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>minDist</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>Infinity</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>currentPalette</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentPalette</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dist</span>(<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>pColor</span>), <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>pColor</span>), <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>pColor</span>));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>d</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>minDist</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>minDist</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>d</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentPalette</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>color</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details></div></div><style>.sketch{width:100%;height:500px;display:flex}</style><script>function adjustIframeSize(){var e=document.querySelector("#palette").contentDocument.querySelector("canvas"),t=document.getElementById("palette");t.style.height=Math.round(e.height*700/e.width)+24+"px"}window.addEventListener("load",function(){setTimeout(adjustIframeSize,150)},{passive:!0})</script></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcrackers/showcase/commit/dd0e6b18aa916692d4ca3c58a72def63e7daa35e title='Last modified by Ivan Yared Lombana Lozano | April 16, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 16, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#re-coloring><strong>Re-Coloring</strong></a><ul><li><a href=#how-does-it-work>How does it work?</a></li><li><a href=#result>Result</a></li></ul></li><li><a href=#samples>Samples</a><ul><li><a href=#ishihara-test-7>Ishihara Test 7</a></li><li><a href=#ishihara-test-4>Ishihara Test 4</a></li></ul></li></ul></nav></div></aside></main></body></html>