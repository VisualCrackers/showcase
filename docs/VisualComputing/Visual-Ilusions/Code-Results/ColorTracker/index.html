<!doctype html><html lang=es-es dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Color tracker # The reduced ability to distinguish between certain colors due to a genetic defect such as color blindness, makes color an important variable when making any design; that is why it is important to try to reduce the inconveniences that this can cause. Additionally, this different or null perception of colors is not only a condition like things are seen, but it also affects the ability to get information from the environment."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Color tracker # The reduced ability to distinguish between certain colors due to a genetic defect such as color blindness, makes color an important variable when making any design; that is why it is important to try to reduce the inconveniences that this can cause. Additionally, this different or null perception of colors is not only a condition like things are seen, but it also affects the ability to get information from the environment."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcrackers.github.io/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ColorTracker/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-01T13:50:40-05:00"><title>Color Tracker | Visual Crackers ðŸ’¥</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Crackers ðŸ’¥</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Visual Computing</span><ul><li><input type=checkbox id=section-4a86fae448a0f2e6d110fe23b7c4ce25 class=toggle checked>
<label for=section-4a86fae448a0f2e6d110fe23b7c4ce25 class="flex justify-between"><a role=button>Visual Ilusions</a></label><ul><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Intro-background/>Intro & Background</a></li><li><input type=checkbox id=section-0cee58da2e2f7ba7406b81f716a40f1b class=toggle checked>
<label for=section-0cee58da2e2f7ba7406b81f716a40f1b class="flex justify-between"><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/>Code & Results</a></label><ul><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/Palette/>Palette</a></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ColorTracker/ class=active>Color Tracker</a></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Code-Results/ReColoring/>Re Coloring</a></li></ul></li><li><a href=/showcase/docs/VisualComputing/Visual-Ilusions/Conclusions-Future-work/>Conclusions & Future Work</a></li></ul></li></ul></li><li><a href=/showcase/docs/About/>About</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Color Tracker</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#color-tracker><strong>Color tracker</strong></a><ul><li><a href=#what-can-be-done>What can be done?</a><ul><li><a href=#how-does-it-work>How does it work?</a></li></ul></li><li><a href=#result>Result</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=color-tracker><strong>Color tracker</strong>
<a class=anchor href=#color-tracker>#</a></h1><p>The reduced ability to distinguish between certain colors due to a genetic defect such as <a href=https://en.wikipedia.org/wiki/Color_blindness><em><strong>color blindness</strong></em></a>, makes color an important variable when making any design; that is why it is important to try to reduce the inconveniences that this can cause. Additionally, this different or null perception of colors is not only a condition like things are seen, but it also affects the ability to <em>get information from the environment</em>.</p><p>Facing color blindness is a challenge that is not easy to assume, especially when a first approach is made since you do not have a clear idea of what the world of a colorblind person looks like. However, it is the people with this disability who usually have to accommodate to others and the confusion between colors can generate great frustration.</p><h2 id=what-can-be-done>What can be done?
<a class=anchor href=#what-can-be-done>#</a></h2><p>In search of an alternative to reduce the inconveniences that this can cause, a script was created in P5.js that allows <em>monitoring of the colors</em> found on the screen, and in turn <em>identifies</em> them automatically in the names of the colors that have been established in the system.</p><h3 id=how-does-it-work>How does it work?
<a class=anchor href=#how-does-it-work>#</a></h3><blockquote class=book-hint><p>To match the color that the user wants, you can do it in two ways:</p><ol><li>Clicking on the color that you want to identify that is in the current video.</li><li>Entering the amount of red, green and blue (RGB Code) you want to identify in the current video.</li></ol></blockquote><p>Once the color has been selected, the name of the color that most closely matches the existing ones in the list is displayed provided by the library <a href=https://chir.ag/projects/name-that-color/><strong>Name That Color</strong></a> and, additionally, the closest pixel to the origin that matches that color is tracked.</p><blockquote class="book-hint info">The script below details how the pixel matrix of the current video is traversed in search of the first instance that is similar, given a tolerance margin.</blockquote><details open><summary>findColor</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>findColor</span>(<span style=color:#a6e22e>input</span>, <span style=color:#a6e22e>color</span>){
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>matchR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>matchG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>matchB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>width</span><span style=color:#f92672>+</span><span style=color:#a6e22e>x</span>)<span style=color:#f92672>*</span><span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>capture</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>capture</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>capture</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>r</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>matchR</span><span style=color:#f92672>-</span><span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matchR</span><span style=color:#f92672>+</span><span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>g</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>matchG</span><span style=color:#f92672>-</span><span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matchG</span><span style=color:#f92672>+</span><span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>b</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>matchB</span><span style=color:#f92672>-</span><span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>matchB</span><span style=color:#f92672>+</span><span style=color:#a6e22e>tolerance</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><p>Once the color is found, it is highlighted in the video and the screen shows the hexadecimal code of the closest color found with the <a href=https://chir.ag/projects/ntc/><em>ntc</em></a> library and its respective name. At a lower level, the color code that was selected to search is shown, which should not be too far from the one already found.</p><blockquote class="book-hint warning">The following functions are used to perform conversions and code determinations:</blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>componentToHex</span>(<span style=color:#a6e22e>color</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>.<span style=color:#a6e22e>toString</span>(<span style=color:#ae81ff>16</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>hex</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;0&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>hex</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>hex</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rgbToHex</span>(<span style=color:#a6e22e>color</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;#&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>componentToHex</span>(<span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#f92672>+</span> <span style=color:#a6e22e>componentToHex</span>(<span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>1</span>]) <span style=color:#f92672>+</span> <span style=color:#a6e22e>componentToHex</span>(<span style=color:#a6e22e>color</span>[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Finally, it was decided to also carry out the color label in a much smaller spectrum, which allows a more general identification of the colors. The implementation of this utility was made from the HSL color code. For the best visualization of the color you are working with, there is a box at the bottom that is filled with the matching color.</p><h2 id=result>Result
<a class=anchor href=#result>#</a></h2><blockquote class=book-hint>The final result is the following Sketch that allows real-time ColorTracking through the camera.</blockquote><iframe id=palette class=sketch srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            <script src=/showcase/sketches/colorTracker.js>
            </script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><blockquote class="book-hint info"><p><strong>Colors</strong></p><p>The opensource library <a href=https://chir.ag/projects/ntc/><strong>Name That Color</strong></a> provides a list of colors that includes more than 1500 color names, with their respective RGB and Hexadecimal codes. Also, it contains embedded the code that calculates the closest color to the given color.</p></blockquote><blockquote class="book-hint danger"><p><strong>Color Tracker</strong></p><p>The tracking and identification of the colors that are selected will be greatly affected by the lighting in the environment or the quality of the camera.</p></blockquote><style>.sketch{width:100%;height:523px;display:flex}</style></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcrackers/showcase/commit/5e273c8108c90ff5124b95525d79b75fb32cc536 title='Last modified by Ivan Yared Lombana Lozano | April 1, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 1, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#color-tracker><strong>Color tracker</strong></a><ul><li><a href=#what-can-be-done>What can be done?</a><ul><li><a href=#how-does-it-work>How does it work?</a></li></ul></li><li><a href=#result>Result</a></li></ul></li></ul></nav></div></aside></main></body></html>